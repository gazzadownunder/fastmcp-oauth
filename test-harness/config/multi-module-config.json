{
  "auth": {
    "trustedIDPs": [
      {
        "name": "keycloak",
        "issuer": "http://localhost:8080/realms/test",
        "jwksUri": "http://localhost:8080/realms/test/protocol/openid-connect/certs",
        "audience": "mcp-server-api",
        "algorithms": ["RS256"],
        "claimMappings": {
          "legacyUsername": "legacy_name",
          "roles": "realm_access.roles",
          "scopes": "scope"
        }
      }
    ],
    "roleMappings": {
      "admin": ["admin", "realm-admin"],
      "user": ["user", "mcp-user"],
      "guest": ["guest"],
      "defaultRole": "guest",
      "rejectUnmappedRoles": false
    }
  },
  "delegation": {
    "defaultToolPrefix": "sql",
    "modules": {
      "postgresql1": {
        "toolPrefix": "hr-sql",
        "host": "localhost",
        "port": 5432,
        "database": "hr_database",
        "user": "service_account",
        "password": "service_password",
        "options": {
          "ssl": false
        },
        "pool": {
          "max": 10,
          "min": 2
        },
        "tokenExchange": {
          "idpName": "keycloak",
          "tokenEndpoint": "http://localhost:8080/realms/test/protocol/openid-connect/token",
          "clientId": "mcp-server",
          "clientSecret": "client-secret",
          "audience": "urn:sql:hr-database",
          "scope": "openid profile sql:read sql:write",
          "requiredClaim": "legacy_name",
          "cache": {
            "enabled": true,
            "ttlSeconds": 60,
            "sessionTimeoutMs": 900000,
            "maxEntriesPerSession": 10
          }
        },
        "_comment": "HR Database"
      },
      "postgresql2": {
        "toolPrefix": "sales-sql",
        "host": "localhost",
        "port": 5432,
        "database": "sales_database",
        "user": "service_account",
        "password": "service_password",
        "options": {
          "ssl": false
        },
        "pool": {
          "max": 10,
          "min": 2
        },
        "tokenExchange": {
          "idpName": "keycloak",
          "tokenEndpoint": "http://localhost:8080/realms/test/protocol/openid-connect/token",
          "clientId": "mcp-server",
          "clientSecret": "client-secret",
          "audience": "urn:sql:sales-database",
          "scope": "openid profile sql:read",
          "requiredClaim": "legacy_name",
          "cache": {
            "enabled": true,
            "ttlSeconds": 60
          }
        },
        "_comment": "Sales Database (Read-Only)"
      },
      "mssql1": {
        "toolPrefix": "legacy",
        "server": "localhost",
        "database": "legacy_erp",
        "options": {
          "trustedConnection": false,
          "encrypt": true,
          "trustServerCertificate": true
        },
        "tokenExchange": {
          "idpName": "keycloak",
          "tokenEndpoint": "http://localhost:8080/realms/test/protocol/openid-connect/token",
          "clientId": "mcp-server",
          "clientSecret": "client-secret",
          "audience": "urn:sql:legacy-erp",
          "scope": "openid profile sql:read sql:write"
        },
        "_comment": "Legacy ERP System (MSSQL)"
      },
      "rest-api1": {
        "toolPrefix": "internal-api",
        "baseUrl": "https://internal-api.company.com",
        "tokenExchange": {
          "idpName": "keycloak",
          "tokenEndpoint": "http://localhost:8080/realms/test/protocol/openid-connect/token",
          "clientId": "mcp-server",
          "clientSecret": "client-secret",
          "audience": "internal-api",
          "scope": "api:read api:write",
          "cache": {
            "enabled": true,
            "ttlSeconds": 120
          }
        },
        "_comment": "Internal REST API"
      },
      "rest-api2": {
        "toolPrefix": "partner-api",
        "baseUrl": "https://partner-api.example.com",
        "tokenExchange": {
          "idpName": "keycloak",
          "tokenEndpoint": "http://localhost:8080/realms/test/protocol/openid-connect/token",
          "clientId": "mcp-server",
          "clientSecret": "client-secret",
          "audience": "partner-api",
          "scope": "api:read"
        },
        "_comment": "Partner REST API (Read-Only)"
      },
      "kerberos1": {
        "toolPrefix": "file-browse",
        "serviceAccount": "svc-mcp-server",
        "keytabPath": "/etc/keytabs/svc-mcp-server.keytab",
        "realm": "COMPANY.COM",
        "kdc": "dc1.company.com",
        "allowedSpns": [
          "cifs/fileserver.company.com"
        ],
        "_comment": "File Server Access (Kerberos)"
      }
    }
  },
  "mcp": {
    "serverName": "Multi-Module MCP Server",
    "version": "2.2.0",
    "transport": "httpStream",
    "port": 3000,
    "enabledTools": {}
  },
  "audit": {
    "logAllAttempts": true,
    "retentionDays": 90
  }
}
